import{al as x,am as k,U as b,r as f,t as C,an as M,v as S,x as D,S as p,J as y,a1 as h,u as s,A as P,M as T}from"./vendor-bvqfP1Qu.js";import{E as _,a as v,b as V,c as B,d as E}from"./elementPlus-DS9hsnWV.js";const i=x.create({baseURL:"http://localhost:8000"}),d={getConfig(){return i.post("/config/get")},setConfig(t){return i.post("/config/set",t)},startPreview(){return i.post("/preview")},stopPreview(){return i.post("/stop_preview")},startDetect(){return i.post("/start_detect")},stopDetect(){return i.post("/stop_detect")},getModelClasses(t){return i.post("/model/classes",{model_path:t})},getModelPath(){return i.post("/model/get")},changeHotkey(){return i.post("/hotkey/change")}},m={x_pixels:3840,y_pixels:2440,x_base_speed:3,y_base_speed:3,model_path:"models/yolo12n.engine",hotkey:"x1",x_target_offset:.5,y_target_offset:.1,confidence:.25,classes:[0],enable_int8:!1},H=k("config",()=>{const t=b({...m}),u=f([]),r=f("dark"),l=f("预览"),n=f(!0),o=f("启动"),c=f(!1),w=async()=>{try{const e=await d.getConfig();return e.data.error===0&&(Object.assign(t,e.data.data),await g(t.model_path),e.data.data.theme&&(r.value=e.data.data.theme)),e.data}catch(e){throw console.error("加载配置失败:",e),e}},g=async e=>{try{const a=await d.getModelClasses(e);return a.data.error===0&&(u.value=a.data.data),a.data}catch(a){throw console.error("加载模型类别失败:",a),a}};return{config:t,classOptions:u,theme:r,previewButtonText:l,previewButtonDisabled:n,detectButtonText:o,saveButtonDisabled:c,loadConfig:w,loadClassOptions:g,selectHotkey:async()=>{t.hotkey="请按下任意按键...";try{const e=await d.changeHotkey();return e.data.error===0?t.hotkey=e.data.data.hotkey:t.hotkey=m.hotkey,e.data}catch(e){throw console.error("获取热键失败:",e),t.hotkey=m.hotkey,e}},selectModel:async()=>{const e=t.model_path;t.model_path="请选择模型...";try{const a=await d.getModelPath();return a.data.error===0?(t.model_path=a.data.data.model_path,await g(t.model_path)):t.model_path=e,a.data}catch(a){throw console.error("选择模型失败:",a),t.model_path=e,a}},saveConfig:async()=>{try{const e={...t,theme:r.value};return(await d.setConfig(e)).data}catch(e){throw console.error("保存配置失败:",e),e}},togglePreview:async()=>{if(l.value==="预览")try{const e=await d.startPreview();return e.data.error===0&&(l.value="取消预览"),e.data}catch(e){throw console.error("启动预览失败:",e),e}else try{const e=await d.stopPreview();return e.data.error===0&&(l.value="预览"),e.data}catch(e){throw console.error("停止预览失败:",e),e}},toggleDetect:async()=>{if(o.value==="启动"){c.value=!0,n.value=!1;try{const e=await d.startDetect();return e.data.error===0?o.value="停止":(c.value=!1,n.value=!0),e.data}catch(e){throw console.error("启动检测失败:",e),c.value=!1,n.value=!0,e}}else try{const e=await d.stopDetect();return e.data.error===0&&(o.value="启动",c.value=!1,n.value=!0,l.value="预览"),e.data}catch(e){throw console.error("停止检测失败:",e),e}},updateTheme:e=>{r.value=e}}}),O=(t,u)=>{const r=t.__vccOpts||t;for(const[l,n]of u)r[l]=n;return r},U={class:"settings-container"},N={class:"hotkey-container"},j=C({__name:"MainSettings",setup(t){const u=H(),{config:r}=M(u),l=async()=>{try{await u.selectHotkey()}catch(n){console.error("选择热键失败:",n)}};return(n,o)=>(D(),S("div",U,[p(s(E),{"label-width":"120px"},{default:y(()=>[p(s(_),{label:"x轴360度像素"},{default:y(()=>[p(s(v),{modelValue:s(r).x_pixels,"onUpdate:modelValue":o[0]||(o[0]=c=>s(r).x_pixels=c),min:0,"controls-position":"right",style:{width:"200px"}},null,8,["modelValue"])]),_:1}),o[4]||(o[4]=h()),p(s(_),{label:"y轴180度像素"},{default:y(()=>[p(s(v),{modelValue:s(r).y_pixels,"onUpdate:modelValue":o[1]||(o[1]=c=>s(r).y_pixels=c),min:0,"controls-position":"right",style:{width:"200px"}},null,8,["modelValue"])]),_:1}),o[5]||(o[5]=h()),p(s(_),{label:"触发热键"},{default:y(()=>[P("div",N,[p(s(V),{type:"primary",size:"large"},{default:y(()=>[h(T(s(r).hotkey),1)]),_:1}),o[3]||(o[3]=h()),p(s(B),{type:"primary",onClick:l,style:{"margin-left":"12px"}},{default:y(()=>[...o[2]||(o[2]=[h(" 选择 ",-1)])]),_:1})])]),_:1})]),_:1})]))}}),F=O(j,[["__scopeId","data-v-f6acaa01"]]),G=Object.freeze(Object.defineProperty({__proto__:null,default:F},Symbol.toStringTag,{value:"Module"}));export{G as M,O as _,H as u};
